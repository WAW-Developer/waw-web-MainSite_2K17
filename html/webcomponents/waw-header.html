
<dom-module id="waw-header">
  <template>
    <style>
      /* local styles go here */
/*       :host { */
/*         display: block; */
/*       } */
    </style>
    
    <!-- local DOM goes here -->
<!--     <span>Not much here yet.</span> -->
    
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-header-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Brand</a>
        </div>
    
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="#bs-header-navbar-collapse-1">
          
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Link</a></li>
            
            <template id="topics_list" is="dom-repeat" items="{{topics}}" as="_topic">
                <li class$="{{_topic_Class(_topic._model.selected)}}">
                    <a href="javascript:void(null);" 
                        on-click="_itemclicked" 
                        data-target$="[[_topic.id]]">{{_topic.name}}</a>
                </li>
            </template>
            
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="javascript:void(null);" on-click="_itemclicked" data-target="action">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Separated link</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          
<!--           <form class="navbar-form navbar-left"> -->
<!--             <div class="form-group"> -->
<!--               <input type="text" class="form-control" placeholder="Search"> -->
<!--             </div> -->
<!--             <button type="submit" class="btn btn-default">Submit</button> -->
<!--           </form> -->
          
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Link</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Separated link</a></li>
              </ul>
            </li>
          </ul>
          
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    
  </template>
  
  
  
  
  
  
   <script>
   Polymer({
     /* this is the element's prototype */
    is: 'waw-header',
    
    properties: {

      mode: {
        type: String,
        value: 'auto'
      },

      topics: {
          type: Array,
          reflectToAttribute: true,
          notify: true,
          value: function() { return []; }

      }

    },
    
    
    
    /**
     * Called when the component is ready
     */
    ready: function() {
//         console.log(this.localName + '#' + this.id + ' has local DOM initialized'); //// TODO: REMOVE DEBUG LOG
      },
      
      
      
    _itemclicked: function(_e, _detail) {

        var _this = this;
        var _data_target = jQuery(_e.srcElement).attr('data-target');
//         console.log(_data_target); //// TODO: REMOVE DEBUG LOG

          
        _this.fire('itemclicked', {
            'data-target': _data_target
            });
          
          
          // .srcElement.childNodes["0"].data
          // .srcElement.attributes[1]
      },
      
      
    _topic_Class: function(_selected) {
        console.log('_topic_Class'); //// TODO: REMOVE DEBUG LOG
        console.log(_selected); //// TODO: REMOVE DEBUG LOG

        return _selected === true ? 'active' : '';
    },
      
    
    
    set_topics: function (_options) {
        
        var _this = this;
        var _topics = _options.topics;
        
        console.log(_topics); //// TODO: REMOVE DEBUG LOG

     // clear an array
        _this.set('topics', []);

        _topics.forEach(function(_item, _id){
//             _data.topics.push(_item);

            if (_item._model === undefined) {
                _item._model = {};
            }
            
            _item._model.selected = (_item._model.selected === true) ? true : false;

            _this.push('topics', _item);
        });
        

    },
    
    set_active_topic: function (_options) {
        
        var _this = this;
        var _topic_ID = _options.topic;
        var _data = _this.data;
        var _topics = _this.topics;
//         var _topics = _this.data.topics.slice(0);
        
        _topics.forEach(function(_topic, _i) {
//             _topic._model.selected = _topic.id === _topic_ID ? true: false;
            _this.set('topics.' + _i + '._model.selected', _topic.id === _topic_ID ? true: false);
        });
        
            
    }
    
   
      
      
  });
  </script>
</dom-module>